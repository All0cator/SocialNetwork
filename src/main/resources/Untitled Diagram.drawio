<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0" version="27.0.2">
  <diagram name="Page-1" id="mDenlVi_8w2Fyz-U-0eb">
    <mxGraphModel dx="1034" dy="1704" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="GJABrzc_7898_9GV0pyr-1" value="Client&lt;div&gt;-----------------------------------------------------------------&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;- ID : int&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;- clientLocalDirectoryPath : String&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;------------------------------------------------------------------&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;+ login(userName : String, password : String) : int&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;+ signup(userName : String, password : String) : int&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;+ access_profile()&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;+ upload()&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;+ syncrhonize()&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;+ search(Photo_name : String)&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=center;" parent="1" vertex="1">
          <mxGeometry x="10" y="110" width="310" height="190" as="geometry" />
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-3" value="Server&lt;div&gt;-------------------------------------------------&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;- id : int&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;- files : File&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;-------------------------------------------------&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;+ synchronize(p : SynchronizePayload) :&amp;nbsp;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=center;" parent="1" vertex="1">
          <mxGeometry x="410" y="-30" width="330" height="170" as="geometry" />
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-5" value="UserDirectoryPayload&lt;br&gt;&lt;div&gt;------------------------------------&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;+ userID : int&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;+ localDirectory : Directory&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=center;" parent="1" vertex="1">
          <mxGeometry x="470" y="330" width="200" height="130" as="geometry" />
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-6" value="Synchronize = Refresh&lt;div&gt;from the client send Directory object as request&amp;nbsp;&lt;/div&gt;&lt;div&gt;to the server&amp;nbsp;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;then the server sends a list of Client&#39;s file paths (.txt, .png) that are not included in client&#39;s local repo (difference operation between client&#39;s remote repo on the server and client&#39;s local repo(Directory sent from client) along with the&amp;nbsp;&lt;/span&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="90" y="-330" width="290" height="260" as="geometry" />
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-8" value="Directory&lt;div&gt;--------------------------------------------------------&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;+ filePaths : String[0..N]&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;+ checksums : BigInteger[0..N]&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;----------------------------------------------------------&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;+ synchronize(other : Directory) : String[0..N]&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=center;" parent="1" vertex="1">
          <mxGeometry x="870" y="-60" width="300" height="180" as="geometry" />
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-9" value="Payload&lt;br&gt;&lt;div&gt;----------------------&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;+ localFilePathUnsyncrhonized : String&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;+ data : Object&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=center;" parent="1" vertex="1">
          <mxGeometry x="790" y="330" width="300" height="130" as="geometry" />
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-10" value=".txt in filePath means text : Object = String&lt;div&gt;.png in filePath means Image : Object =&amp;nbsp;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1130" y="350" width="310" height="60" as="geometry" />
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-11" value="UploadPayload&lt;br&gt;&lt;div&gt;------------------------------------&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;+ userID : int&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;+ localDirectory : Directory&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=center;" parent="1" vertex="1">
          <mxGeometry x="440" y="680" width="200" height="130" as="geometry" />
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-12" value="ImageData&lt;br&gt;&lt;div&gt;------------------------------------&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;+ width : int&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;+ height : int&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;+ type : int&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;+ data : byte[]&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=center;" parent="1" vertex="1">
          <mxGeometry x="850" y="800" width="200" height="130" as="geometry" />
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-15" value="MessageTypes&lt;br&gt;&lt;div&gt;------------------------------------&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;SYN&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;SYN_ACK&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;ACK&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=center;" parent="1" vertex="1">
          <mxGeometry x="650" y="990" width="200" height="130" as="geometry" />
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-17" value="Server" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1140" y="1250" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-18" value="Client" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="770" y="1250" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-19" value="" style="endArrow=none;dashed=1;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1200" y="1880" as="sourcePoint" />
            <mxPoint x="1200" y="1310" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-20" value="" style="endArrow=none;dashed=1;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="830" y="1880" as="sourcePoint" />
            <mxPoint x="829.5" y="1308" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-22" value="" style="endArrow=classic;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="830" y="1370" as="sourcePoint" />
            <mxPoint x="1200" y="1370" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-23" value="SYN, null" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="880" y="1340" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-24" value="" style="endArrow=classic;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1200" y="1410" as="sourcePoint" />
            <mxPoint x="830" y="1410" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-25" value="SYN_ACK, null" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;flipH=1;" parent="1" vertex="1">
          <mxGeometry x="1090" y="1380" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-26" value="" style="endArrow=classic;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="835" y="1460" as="sourcePoint" />
            <mxPoint x="1205" y="1460" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-27" value="ACK, Photo_Name" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;flipH=0;" parent="1" vertex="1">
          <mxGeometry x="880" y="1430" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-28" value="" style="endArrow=classic;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1200" y="1530" as="sourcePoint" />
            <mxPoint x="830" y="1530" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-29" value="ACK, Photo_bytes" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;flipH=1;" parent="1" vertex="1">
          <mxGeometry x="1075" y="1500" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-30" value="CommandAPDU&lt;br&gt;&lt;div&gt;------------------------------------&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;+ ne : short&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;+ nc : short&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;+commandData : byte[nc]&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=center;" parent="1" vertex="1">
          <mxGeometry x="1170" y="960" width="200" height="130" as="geometry" />
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-31" value="ResponseAPDU&lt;br&gt;&lt;div&gt;------------------------------------&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;+ responseData : byte[ne]&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;+ sw1sw2 : short&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=center;" parent="1" vertex="1">
          <mxGeometry x="1400" y="960" width="200" height="130" as="geometry" />
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-32" value="type is from buffered reader imageType" style="rounded=0;whiteSpace=wrap;html=1;align=center;" parent="1" vertex="1">
          <mxGeometry x="1120" y="680" width="200" height="130" as="geometry" />
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-34" value="" style="curved=1;endArrow=classic;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1200" y="1600" as="sourcePoint" />
            <mxPoint x="1200" y="1550" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1230" y="1600" />
              <mxPoint x="1240" y="1600" />
              <mxPoint x="1240" y="1590" />
              <mxPoint x="1240" y="1570" />
              <mxPoint x="1240" y="1550" />
              <mxPoint x="1230" y="1550" />
              <mxPoint x="1200" y="1550" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-35" value="Print(&quot;Server did not receive ACK&quot;)" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;flipH=1;" parent="1" vertex="1">
          <mxGeometry x="1240" y="1570" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-36" value="" style="endArrow=classic;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1195" y="1630" as="sourcePoint" />
            <mxPoint x="825" y="1630" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-37" value="ACK, Photo_bytes" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;flipH=1;" parent="1" vertex="1">
          <mxGeometry x="1070" y="1600" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-38" value="retransmit" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;flipH=1;" parent="1" vertex="1">
          <mxGeometry x="1240" y="1540" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-39" value="" style="endArrow=classic;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="825" y="1690" as="sourcePoint" />
            <mxPoint x="1195" y="1690" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-40" value="ACK, null" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;flipH=0;" parent="1" vertex="1">
          <mxGeometry x="830" y="1660" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-41" value="" style="endArrow=classic;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1200" y="1760" as="sourcePoint" />
            <mxPoint x="830" y="1760" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="GJABrzc_7898_9GV0pyr-42" value="APDU" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;flipH=0;" parent="1" vertex="1">
          <mxGeometry x="1090" y="1730" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="uYygU80v8NMdNlQ01LOZ-1" value="We have 10 packets and image is N bytes&lt;div&gt;thus we need packets of size N / 10 bytes&lt;/div&gt;&lt;div&gt;but N / 10 is not integer it has a decimal part&amp;nbsp;&lt;/div&gt;&lt;div&gt;that decimal part multiplied by 10 is a number from 0 to 9&lt;/div&gt;&lt;div&gt;thus each packet has floor(N / 10) bytes per packet and the final&lt;/div&gt;&lt;div&gt;packet has floor(N / 10) + (ceil(N / 10) - N / 10) * 10 bytes&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="250" y="1530" width="385" height="290" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
